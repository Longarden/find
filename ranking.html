<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì œë³´ ì ìˆ˜ ë­í‚¹</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="ranking.css">
    <!-- <style>
        table { border-collapse: collapse; width: 80%; margin: 30px auto; }
        th, td { border: 1px solid #aaa; padding: 8px 12px; text-align: center; }
        th { background: #f0f0f0; }
        h2 { text-align: center; }
    </style> -->
</head>
<body>
    <header>
        <div class="container">
            <div class="header-left">
                <a href="index.html" class="logo">FIND</a>
            </div>
        </div>
    </header>

    <h2 style="text-align:center;">ì œë³´ ì ìˆ˜ ë­í‚¹</h2>

    <div class="ranking-container">
        <!-- ìƒìœ„ ë­ì»¤ ë°•ìŠ¤ -->
        <div class="top-rankers">
            <h2>ìƒìœ„ ì œë³´ì</h2>
            <ul class="top-list" id="top-rankers-list">
                <!-- Top 5 ë¦¬ìŠ¤íŠ¸ê°€ ì—¬ê¸°ì— ë“¤ì–´ê° -->
            </ul>
        </div>

        <!-- ì „ì²´ ë­í‚¹ ë°•ìŠ¤ -->
        <div class="all-rankers">
            <h2>ì „ì²´ ë­í‚¹</h2>
            <div class="ranking-scroll">
                <table id="ranking-table">
                    <thead>
                        <tr>
                            <th>ìˆœìœ„</th>
                            <th>ì œë³´ë²ˆí˜¸</th>
                            <th>ì—°ë½ì²˜</th>
                            <th>ì ìˆ˜</th>
                            <th>ì‹œê°„</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- ì „ì²´ ë­í‚¹ ë°ì´í„°ê°€ ì—¬ê¸°ì— ë“¤ì–´ê° -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <script>
        function updateRanking() {
            fetch("http://localhost:8000/ranking")
                .then(res => res.json())
                .then(data => {
                    const tbody = document.querySelector("#ranking-table tbody");
                    const topList = document.querySelector("#top-rankers-list");
                    tbody.innerHTML = "";
                    topList.innerHTML = "";

                    data.forEach((row, idx) => {
                        // ì „ì²´ ë­í‚¹ í…Œì´ë¸” row
                        const tr = document.createElement("tr");
                        const scoreCell = (row["ì ìˆ˜"] != null) ? row["ì ìˆ˜"] : " ";
                        tr.innerHTML = `
                            <td>${idx + 1}</td>
                            <td>${row["ì œë³´ë²ˆí˜¸"] || ""}</td>
                            <td>${row["ì—°ë½ì²˜"] || ""}</td>
                            <td>${scoreCell}</td>
                            <td>${row["ì‹œê°„"] || ""}</td>
                        `;
                        tbody.appendChild(tr);

                        // Top 5ì¼ ê²½ìš°ë§Œ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
                        if (idx < 5) {
                            const li = document.createElement("li");
                           const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰', 'ğŸ…', 'ğŸ–ï¸'];
li.innerHTML = `
    <span class="rank">${medals[idx] || `${idx + 1}ìœ„`}</span>
    <span class="user">${row["ì—°ë½ì²˜"] || "ìµëª…"}</span>
    <span class="score">${scoreCell}ì </span>
`;

                            topList.appendChild(li);
                        }
                    });
                })
                .catch(console.error);
        }

        updateRanking();
        setInterval(updateRanking, 5000);

    </script>
</body>
</html>
